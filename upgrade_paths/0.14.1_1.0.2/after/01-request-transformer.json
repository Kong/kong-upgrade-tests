[

  [ "request_transformer_service_2",
    [ "admin_2", "POST", "/services", {
      "name": "request_transformer_service_2",
      "url": "http://httpbin.org/anything"
    } ],
    [ 201, {
      "name": "request_transformer_service_2",
      "host": "httpbin.org",
      "path": "/anything",
      "protocol": "http"
    } ]
  ],

  [ "request_transformer_route_2",
    [ "admin_2", "POST", "/services/request_transformer_service/routes", {
      "hosts": [ "request-transformer-route-2.test" ]
    } ],
    [ 201, {
      "hosts": [ "request-transformer-route-2.test" ]
    } ]
  ],

  [ "request_transformer_plugin-2",
    [ "admin_2", "POST", "/plugins", {
      "name": "request-transformer",
      "service": { "id": "#{request_transformer_service_2.id}" },
      "config": {
        "add": { "headers": [ "Authorization:Basic 5678" ] }
      }
    } ],
    [ 201, {
      "name": "request-transformer",
      "service": { "id": "#{request_transformer_service_2.id}" },
      "config": {
        "add": { "headers": [ "Authorization:Basic 5678" ] }
      }
    } ]
  ],

  [ "check that request-transformer-2 adds the header",
    [ "proxy_2", "GET", "/", {}, { "Host": "request-transformer-route-2.test" } ],
    [ 200, { "headers": { "Authorization": "Basic 5678" } } ]
  ],

  [ "check that request-transformer keeps adding the header",
    [ "proxy_2", "GET", "/", {}, { "Host": "request-transformer-route.test" } ],
    [ 200, { "headers": { "Authorization": "Basic 1234" } } ]
  ]
]
